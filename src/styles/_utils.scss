@use 'sass:map';
@use 'sass:string';

/// Accesses deeply nested values from a map since Sass can't do this natively.
/// @param {!Map} $map - Sass map.
/// @param {!Arglist} $keys - Sequence of nested keys.
/// @return {*} - Value of the last nested key.
@function map-deep-get($map, $keys...) {
  @each $key in $keys {
    $map: map.get($map, $key);
  }
  @return $map;
}

/// Appends default duration and timing function to properties which should
/// transition.
/// @param {!List} $properties - List of properties.
/// @return {String} Updated list.
@function transition($properties...) {
  $duration: .25s;
  $timing: ease-out;
  $value: '';
  $total: length($properties);

  @each $property in $properties {
    $block: #{$property} #{$duration} #{$timing};
    $value: $value + $block;
    @if $total > 1 and index($properties, $property) < $total {
      $value: $value + ', ';
    }
  }
  
  @return string.unquote($value);
}

/// Renders light and dark mode custom properties for theming.
/// @param {!String} $attribute - Attribute for custom property scope.
/// @param {!Map} $colors - Sass map.
@mixin color-vars($attribute, $colors) {
  @each $name, $values in $colors {
    $light-color: map.get($values, light);

    [#{$attribute}='#{$name}'] {
      --theme: #{$light-color};
    }
  }

  @media (prefers-color-scheme: dark) {
    @each $name, $values in $colors {
      $dark-color: map.get($values, dark);
  
      [#{$attribute}='#{$name}'] {
        --theme: #{$dark-color};
      }
    }
  }
}